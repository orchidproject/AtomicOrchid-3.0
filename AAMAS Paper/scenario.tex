\section{The Disaster Scenario}\label{sec:scenario}
\noindent We consider a disaster scenario in which a satellite, powered by radioactive fuel,  has crashed in a sub-urban area.\footnote{Given the invisibility of radiation, it is possible to create a believable and challenging environment for the responders to solve in our mixed-reality game (see Section \ref{sec:atomicorchid}).} Debris is strewn around a large area, damaging buildings and causing accidents and injuring civilians. Moreover, radioactive particles discharged from the debris, are gradually spreading over the area, threatening to contaminate food reserves and people. Hence, emergency services (including medics, soldiers, and transportation providers) are deployed to help evacuate the casualties and key assets (e.g., food reserves, medication, vehicles), each requiring different teams of responders, before they are engulfed by the radioactive cloud.  In what follows, we model this scenario formally and then describe the use of a planning agent at headquarters to help coordinate the team, and  the optimisation problem they face (i.e., including emergency services, medics, and soldiers) in trying to save as many lives and assets as possible.  

%We then propose an algorithm to solve this optimisation problem (in Section \ref{sec:algo}). In Section \ref{sec:atomicorchid}, we demonstrate how this algorithm can be used by a software agent (in our mixed-reality game) in a mixed-initiative process to coordinate first responders. 

\subsection{Formal Model}
\noindent Let $G$ denote a grid overlaid on top of the disaster space, and assume the satellite debris, casualties, assets, and actors are located at various coordinates $(x,y) \in G$ in this grid. The radioactive cloud induces a radioactivity level  $l \in [0,100]$ at every point it covers (100 corresponds to maximum radiation and 0 to no radiation). While the exact radiation levels can be measured by responders on the ground (at a given location) using their geiger counter, we assume that additional information is available  from existing sensors  in the area.\footnote{This assumption is not central to our problem and only serves to inform the decision making of the agent as we see later. It is also possible to obtain similar information about radiation levels by fusing the responders' geiger counter readings but this is beyond the scope of the paper.} However, this information is uncertain due to the poor positioning of the sensors and the variations in wind speed and direction (we show how this uncertainty is captured in the next section). A number of safe zones $G' \subseteq G$ are defined where the responders can drop off assets and casualties (i.e., \emph{targets} to be rescued). Let the set of first responders be denoted as $p_1, \cdots p_i \cdots, p_n \in I$, where $|I| = n$ and the set of  targets to be rescued (i.e., rescue tasks) be denoted as  $t_1,\cdots, t_j, \cdots, t_m\in T$, where $|T| = m$. A rescue task is performed by picking the target up, carrying it to a safe zone, and dropping it off.  As responders perform rescue tasks, they may become tired, get injured, or receive radiation doses that may, at worst, be life threatening. Hence, we assign each responder  a health level $h_i\in [0,100]$ that decreases based on its radiation dose ($h_i$ is decreased by $0.02 \times l$ per second given a radiation level $l$) and assume that its decision to pick up and carry the target allocated to it is liable to some uncertainty (e.g., they may not want to pick a target because it is too far or it is unclear how long it is going to take them to  carry it back  to a safe zone).  Moreover, let $\Theta$ denote the types of responders (e.g., fire brigade, soldier, or medic)  and a responder's type determines the capabilities he or she has and therefore the tasks he or she can perform. We denote as $\theta_i \in \Theta$ the type of responder $p_i$. In turn, to complete a given task $t_j$,  a set of responders $I' \subseteq I$ with specific types $\Theta{t_j} \subseteq \Theta$ is required to pick up $t_j$. Thus, a task can only be completed by a team of responders $I'$ if $\{\Theta(p_i) | p_i \in I'\} = \Theta_{t_j}$.
%\begin{figure}[htbp]
%\includegraphics[width=\columnwidth]{scenario.jpg}\vspace{-5mm}
%
%\label{fig:scenario}
%\caption{The interactions between different actors in the disaster scenario. Lines represent communication links. Planner agent and coordinator sit in the headquarters (HQ). First responders (FRs) can communicate with all actors directly.}\end{figure}
\subsection{Human-Agent Collaboration}
\noindent In line with practice in many countries, we assume that the first responders are coordinated from a headquarters (HQ) headed by a human coordinator $H$. In our case, $H$ may be assisted by an autonomous task planning agent $PA$ (more details in Section \ref{sec:algo}), that can receive input from and direct the first responders.   Both  $H$ and $PA$  can communicate their  instructions (task allocations) directly to the responders using an instant messaging system (or walkie talkie).  While these instructions may be in natural language for $H$, $PA$ instructs them with simple requests such as ``Do task X at position Y with team-mate Z" messages. In turn, the responders may not want to do some tasks (for reasons outlined above) and may therefore simply accept or reject the received instruction from $PA$ or $H$. However, $H$ can query the responders' decisions and request for more information about their status (e.g., fatigue or health) and goals (e.g., meeting with team-mate at position X or going for task Y). Instead, if a task is rejected by the responders, $PA$ captures this as a constraint on its task allocation procedure (see more details in Section \ref{sec:adaptive}) and returns a new plan. Thus on the one hand, richer interactions are possible between $H$ and the first responders than between them and $PA$. On the other hand, $PA$ is powered by a powerful task allocation algorithm that can compute an efficient allocation, possibly better than the one computable by $H$ (particularly when many responders need to be managed). 

It is important to note that our model captures different types of flexible control: (i) agent-based: when $PA$ directly instructs the responders  and they can use multiple iterations of accept/reject to collaboratively converge to a definite  plan (ii) human-based: when $H$ communicates goals to the responders in open-ended interactions that may permit $H$ to gain a better understanding of the context than $PA$ and therefore formulate corrective measures faster. Moreover, in contrast to previous work that suggest \emph{transfer-of-control} regimes \cite{scerri:etal:2005}, our approach does not constrain transfers of control to target specific decision points in the operation of the system. Rather, we our interaction mechanisms are designed (see Section \ref{sec:atomicorchid}) to allow human control at any point (and our results  in Section \ref{sec:evaluation} validate this approach). 

Now, given the above model,  in the next section we describe the MMDP formulation of the coordination problem posed and solve it with an efficient approximate algorithm in Section \ref{sec:algo}.


\input{mmdp_model.tex}
